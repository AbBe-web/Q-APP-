<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questionnaire Q-AAP+</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
            max-width: 600px;
            width: 100%;
        }
        h1, p, .result-message {
            text-align: center;
            color: #333;
        }
        .question, .personal-info, .actions {
            margin-bottom: 20px;
        }
        label {
            display: flex;
            align-items: center; /* Aligns the label text with the radio button */
            padding: 5px;
            cursor: pointer;
        }
        input[type="radio"], input[type="text"], textarea {
            margin-right: 10px;
        }
        button {
            background-color: #007BFF;
            color: white;
            padding: 10px;
            border: none;
            width: 100%;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin-bottom: 10px;
        }
        button:hover {
            background-color: #0056b3;
        }
        /* Print-specific styles */
        @media print {
            body, .container {
                background-color: white;
                box-shadow: none;
                padding: 5px;
                margin: 0;
                max-width: 100%;
                font-size: 10px;
            }
            button, .actions {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Questionnaire Q-AAP+</h1>
        <p>Lisez les 7 questions avec attention et répondez à chacune, avec honnêteté, par oui ou non</p>
        <form id="qAppPlusForm">
            <div class="question">
                <p>1. Votre médecin vous a dit que vous étiez atteint d’un problème cardiaque ou d’une hypertension ?</p>
                <label><input type="radio" name="q1" value="1"> Oui</label>
                <label><input type="radio" name="q1" value="0"> Non</label>
            </div>
            <div class="question">
                <p>2. Ressentez-vous une douleur à la poitrine au repos, ou au cours de vos activités quotidiennes ou lorsque vous faites de l’activité physique ?</p>
                <label><input type="radio" name="q2" value="1"> Oui</label>
                <label><input type="radio" name="q2" value="0"> Non</label>
            </div>
            <div class="question">
                <p>3. Éprouvez-vous des pertes d’équilibre liées à des étourdissements ou avez-vous perdu conscience au cours des 12 derniers mois ? Répondez non si vos étourdissements étaient liés à de l’hyperventilation (y compris pendant une activité physique d’intensité élevée).</p>
                <label><input type="radio" name="q3" value="1"> Oui</label>
                <label><input type="radio" name="q3" value="0"> Non</label>
            </div>
            <div class="question">
                <p>4. Avez-vous déjà été diagnostiqué d’une autre maladie chronique (autre qu’une maladie cardiaque ou d’hypertension artérielle) ?</p>
                <label><input type="radio" name="q4" value="1"> Oui</label>
                <label><input type="radio" name="q4" value="0"> Non</label>
                <textarea name="q4_details" placeholder="Lister les maladies ici"></textarea>
            </div>
            <div class="question">
                <p>5. Prenez-vous actuellement des médicaments prescrits pour une maladie chronique ?</p>
                <label><input type="radio" name="q5" value="1"> Oui</label>
                <label><input type="radio" name="q5" value="0"> Non</label>
                <textarea name="q5_details" placeholder="Lister les maladies et les médicaments ici"></textarea>
            </div>
            <div class="question">
                <p>6. Avez-vous actuellement des problèmes osseux, articulaires, ou des tissus mous qui pourraient être aggravés par une augmentation d’activité physique ?</p>
                <label><input type="radio" name="q6" value="1"> Oui</label>
                <label><input type="radio" name="q6" value="0"> Non</label>
                <textarea name="q6_details" placeholder="Lister vos problèmes médicaux ici"></textarea>
            </div>
            <div class="question">
                <p>7. Votre médecin vous a-t-il déjà dit que vous ne devriez pas faire d’activité physique sans supervision médicale ?</p>
                <label><input type="radio" name="q7" value="1"> Oui</label>
                <label><input type="radio" name="q7" value="0"> Non</label>
            </div>
            <div class="personal-info">
                <input type="text" id="firstName" placeholder="Prénom" required>
                <input type="text" id="lastName" placeholder="Nom" required>
                <p>Date: <span id="currentDate"></span></p>
            </div>
            <button type="button" onclick="submitForm()">Soumettre</button>
            <div class="result-message"></div>
            <div class="actions">
                <button type="button" onclick="printDocument()">Imprimer</button>
                <button type="button" onclick="generatePDF()">Créer PDF</button>
            </div>
        </form>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
    <script>
        document.getElementById('currentDate').textContent = new Date().toLocaleDateString('fr-FR');

        function submitForm() {
            const form = document.forms['qAppPlusForm'];
            let hasYes = Array.from(form.querySelectorAll('input[type="radio"]:checked')).some(radio => radio.value === '1');
            const resultMessage = document.querySelector('.result-message');
            resultMessage.textContent = hasYes ?
                "Vous avez répondu oui, à au moins une des questions, il est recommandé de consulter votre médecin avant d'augmenter votre niveau d'activité physique." :
                "Vous avez répondu non à toutes les questions ci-dessus, vous pouvez pratiquer l'activité physique. Toutefois, si vous avez plus de 45 ans et que vous envisagez de pratiquer de l'activité physique intense ou très intense, il est recommandé que vous consultiez votre médecin avant de pratiquer.";
        }

        function printDocument() {
            window.print();
        }

        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            let content = "Réponses au Questionnaire Q-AAP+:\n\n";

            const form = document.forms['qAppPlusForm'];
            Array.from(form.querySelectorAll('input[type="radio"]')).forEach((input, index) => {
                if (input.checked) {
                    const questionText = form.querySelectorAll('.question p')[index].textContent;
                    content += questionText + ": " + (input.value === '1' ? "Oui" : "Non") + "\n";
                }
            });

            content += "\nConclusion:\n" + document.querySelector('.result-message').textContent;
            doc.text(content, 10, 10, { maxWidth: 180 }); // Use maxWidth to manage line breaks
            doc.save('Questionnaire-Q-AAP+.pdf');
        }
    </script>
</body>
</html>


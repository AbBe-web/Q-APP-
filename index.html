<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questionnaire Q-AAP+</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
            max-width: 600px;
            width: 100%;
        }
        h1, p, .result-message, .full-responses {
            text-align: center;
            color: #333;
        }
        .question, .personal-info, .actions {
            margin-bottom: 20px;
        }
        label {
            display: block;
            padding: 5px;
            cursor: pointer;
        }
        input[type="radio"], input[type="text"], input[type="email"], textarea {
            margin-right: 8px;
            width: 100%;
        }
        button {
            background-color: #007BFF;
            color: white;
            padding: 12px;
            border: none;
            width: 100%;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin-bottom: 10px;
        }
        button:hover {
            background-color: #0056b3;
        }
        /* Responsive adjustments */
        @media (max-width: 768px) {
            body, .container {
                padding: 10px;
            }
            h1 {
                font-size: 1.2em; /* Slightly smaller on mobile */
            }
            button, input[type="text"], input[type="email"], textarea {
                font-size: 1em; /* Larger font for easier reading and interaction */
            }
        }
        /* Print-specific styles */
        @media print {
            body {
                background-color: white;
                padding: 0;
                margin: 0;
                font-size: 12px; /* Smaller font to fit content on one page */
            }
            .container {
                box-shadow: none;
                border-radius: 0;
                max-width: 100%;
                width: auto;
                padding: 5px;
            }
            button, .actions {
                display: none; /* Hide buttons during print */
            }
            .result-message {
                font-size: 10px; /* Smaller font for the result message */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Questionnaire Q-AAP+</h1>
        <p>Lisez les 7 questions avec attention et répondez à chacune, avec honnêteté, par oui ou non</p>
        <form id="qAppPlusForm">
            <div class="question">
                <p>1. Votre médecin vous a dit que vous étiez atteint d’un problème cardiaque ou d’une hypertension ?</p>
                <label><input type="radio" name="q1" value="1"> Oui</label>
                <label><input type="radio" name="q1" value="0"> Non</label>
            </div>
            <div class="question">
                <p>2. Ressentez-vous une douleur à la poitrine au repos, ou au cours de vos activités quotidiennes ou lorsque vous faites de l’activité physique ?</p>
                <label><input type="radio" name="q2" value="1"> Oui</label>
                <label><input type="radio" name="q2" value="0"> Non</label>
            </div>
            <div class="question">
                <p>3. Éprouvez-vous des pertes d’équilibre liées à des étourdissements ou avez-vous perdu conscience au cours des 12 derniers mois ?</p>
                <label><input type="radio" name="q3" value="1"> Oui</label>
                <label><input type="radio" name="q3" value="0"> Non</label>
            </div>
            <div class="question">
                <p>4. Avez-vous déjà été diagnostiqué d’une autre maladie chronique ?</p>
                <label><input type="radio" name="q4" value="1"> Oui</label>
                <label><input type="radio" name="q4" value="0"> Non</label>
                <textarea name="q4_details" placeholder="Lister les maladies ici"></textarea>
            </div>
            <div class="question">
                <p>5. Prenez-vous actuellement des médicaments prescrits pour une maladie chronique ?</p>
                <label><input type="radio" name="q5" value="1"> Oui</label>
                <label><input type="radio" name="q5" value="0"> Non</label>
                <textarea name="q5_details" placeholder="Lister les maladies et les médicaments ici"></textarea>
            </div>
            <div class="question">
                <p>6. Avez-vous actuellement des problèmes osseux, articulaires, ou des tissus mous qui pourraient être aggravés par une augmentation d’activité physique ?</p>
                <label><input type="radio" name="q6" value="1"> Oui</label>
                <label><input type="radio" name="q6" value="0"> Non</label>
                <textarea name="q6_details" placeholder="Lister vos problèmes médicaux ici"></textarea>
            </div>
            <div class="question">
                <p>7. Votre médecin vous a-t-il déjà dit que vous ne devriez pas faire d’activité physique sans supervision médicale ?</p>
                <label><input type="radio" name="q7" value="1"> Oui</label>
                <label><input type="radio" name="q7" value="0"> Non</label>
            </div>
            <div class="personal-info">
                <input type="text" id="firstName" placeholder="Prénom" required>
                <input type="text" id="lastName" placeholder="Nom" required>
                <p>Date: <span id="currentDate"></span></p>
            </div>
            <button type="button" onclick="submitForm()">Soumettre</button>
            <div class="result-message"></div>
            <div class="full-responses"></div>
            <div class="actions">
                <button type="button" onclick="printDocument()">Imprimer</button>
                <button type="button" onclick="generatePDF()">Créer PDF</button>
            </div>
        </form>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
    <script>
        document.getElementById('currentDate').textContent = new Date().toLocaleDateString('fr-FR');

        function submitForm() {
            const form = document.forms['qAppPlusForm'];
            const responses = Array.from(form.querySelectorAll('input[type="radio"]:checked'));
            let hasYes = responses.some(radio => radio.value === '1');
            const resultMessage = document.querySelector('.result-message');
            const fullResponses = document.querySelector('.full-responses');
            let fullResponseText = "Réponses complètes au questionnaire:\n\n";

            responses.forEach((input, index) => {
                const question = form.querySelectorAll('.question p')[index];
                fullResponseText += (index + 1) + ". " + question.textContent + ": " + (input.value === '1' ? "Oui" : "Non") + "\n";
            });

            if (hasYes) {
                resultMessage.textContent = "Vous avez répondu oui, à au moins une des questions, il est recommandé de consulter votre médecin avant d'augmenter votre niveau d'activité physique.";
            } else {
                resultMessage.textContent = "Vous avez répondu non à toutes les questions ci-dessus, vous pouvez pratiquer l'activité physique. Toutefois, si vous avez plus de 45 ans et que vous envisagez de pratiquer de l'activité physique intense ou très intense, il est recommandé que vous consultiez votre médecin avant de pratiquer.";
            }

            fullResponses.textContent = fullResponseText;
            // Save responses for PDF generation
            window.localStorage.setItem('fullResponseText', fullResponseText);
            window.localStorage.setItem('responseText', resultMessage.textContent);
        }

        function printDocument() {
            window.print();
        }

        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            let content = window.localStorage.getItem('fullResponseText') + "\nConclusion:\n" + window.localStorage.getItem('responseText');

            doc.text(content, 10, 10);
            doc.save('Questionnaire-Q-AAP+.pdf');
        }
    </script>
</body>
</html>
